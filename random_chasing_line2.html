<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>3D Hexagon with Mouse Interaction</title>
    <style>
        canvas { border: 1px solid black; cursor: pointer; }
    </style>
</head>
<body>
    <canvas id="canvas" width="800" height="600"></canvas>
    <script>
        function draw3DHexagon() {
            const canvas = document.getElementById("canvas");
            const ctx = canvas.getContext("2d");
            const parts = 60;
            const hexagonPoints = generateHexagonPoints(200);
            let isDragging = false;
            let draggedPoint = null;

            function generateHexagonPoints(radius) {
                const points = [];
                for (let i = 0; i < 6; i++) {
                    const angle = Math.PI / 3 * i;
                    points.push({
                        x: radius * Math.cos(angle),
                        y: radius * Math.sin(angle),
                        z: Math.random() * 200 // Random z-axis
                    });
                }
                return points;
            }

            function calculatePoints(start, end) {
                const points = [];
                for (let i = 0; i <= parts; i++) {
                    const t = i / parts;
                    points.push({
                        x: start.x + t * (end.x - start.x),
                        y: start.y + t * (end.y - start.y),
                        z: start.z + t * (end.z - start.z)
                    });
                }
                return points;
            }

            function getColorGradient(t) {
                const red = Math.floor(255 * (1 - t));
                const green = Math.floor(255 * t);
                const blue = 150;
                return `rgb(${red}, ${green}, ${blue})`;
            }

            function drawLines() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                for (let i = 0; i < hexagonPoints.length; i++) {
                    const point1 = hexagonPoints[i];
                    const point2 = hexagonPoints[(i + 1) % hexagonPoints.length];
                    
                    const line1Points = calculatePoints({ x: 0, y: 0, z: 0 }, point1);
                    const line2Points = calculatePoints({ x: 0, y: 0, z: 0 }, point2);

                    for (let j = 0; j <= parts; j++) {
                        const startPoint = line1Points[j];
                        const endPoint = line2Points[parts - j];

                        ctx.beginPath();
                        ctx.moveTo(startPoint.x + 400, startPoint.y + 300);
                        ctx.lineTo(endPoint.x + 400, endPoint.y + 300);
                        ctx.strokeStyle = getColorGradient(j / parts);
                        ctx.stroke();
                    }
                }
            }

            canvas.addEventListener("mousedown", (event) => {
                const { offsetX, offsetY } = event;
                const threshold = 20;
                hexagonPoints.forEach((point, index) => {
                    const distance = Math.hypot(offsetX - (point.x + 400), offsetY - (point.y + 300));
                    if (distance < threshold) {
                        isDragging = true;
                        draggedPoint = index;
                    }
                });
            });

            canvas.addEventListener("mousemove", (event) => {
                if (isDragging && draggedPoint !== null) {
                    hexagonPoints[draggedPoint].x = event.offsetX - 400;
                    hexagonPoints[draggedPoint].y = event.offsetY - 300;
                    drawLines();
                }
            });

            canvas.addEventListener("mouseup", () => {
                isDragging = false;
                draggedPoint = null;
            });

            drawLines(); // Initial drawing
        }

        draw3DHexagon();
    </script>
</body>
</html>

